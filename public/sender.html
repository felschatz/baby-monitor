<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Baby Monitor - Sender</title>
    <link rel="stylesheet" href="/sender.css">
</head>
<body>
    <!-- Session prompt overlay -->
    <div class="session-overlay" id="sessionOverlay">
        <div class="session-prompt">
            <h2>Enter Session Name</h2>
            <p>Use a unique name to connect sender and receiver</p>
            <input type="text" id="sessionInput" placeholder="e.g., felix-baby" autocomplete="off" autocapitalize="none">
            <button class="btn btn-start" id="sessionJoinBtn">Join Session</button>
            <p class="session-hint">Bookmark the URL after joining for easy daily access</p>
        </div>
    </div>

    <!-- Screen off overlay -->
    <div class="screen-off-overlay" id="screenOffOverlay">
        <div class="tap-hint">Tap to wake</div>
    </div>

    <!-- Dim countdown indicator -->
    <div class="dim-indicator" id="dimIndicator">
        Screen dimming soon...
        <div class="countdown-bar" id="countdownBar"></div>
    </div>

    <div class="header">
        <a href="/" class="back-link">â†</a>
        <h2>Baby's Phone</h2>
        <div class="status-indicator">
            <div class="status-dot" id="statusDot"></div>
            <span id="statusText">Disconnected</span>
            <span class="quality-badge" id="qualityBadge"></span>
        </div>
    </div>

    <div class="video-container">
        <video id="localVideo" autoplay muted playsinline></video>
        <!-- Hidden audio element for PTT playback -->
        <audio id="pttAudio" autoplay></audio>
    </div>

    <!-- PTT indicator -->
    <div class="ptt-indicator" id="pttIndicator">
        ğŸ”Š Parent is speaking...
    </div>

    
    <!-- Music indicator -->
    <div class="music-indicator" id="musicIndicator">
        ğŸµ <span id="musicTrackName">Playing music...</span>
        <div class="music-timer" id="musicTimer"></div>
    </div>

    <!-- Hidden audio element for music playback -->
    <audio id="musicAudio"></audio>

    <!-- Music controls (local) -->
    <div class="music-controls-panel" id="musicControlsPanel" style="display: none;">
        <div class="music-controls-row">
            <button class="music-btn" id="musicBtn">ğŸµ</button>
            <select class="music-playlist-select" id="musicPlaylistSelect" title="Select playlist"></select>
            <select class="music-timer-select" id="musicTimerSelect">
                <option value="45">45 min</option>
                <option value="60">1 hour</option>
            </select>
            <button class="music-reset-btn" id="musicResetBtn" style="display: none;">Reset</button>
        </div>
        <div class="music-volume-row">
            <span>ğŸ”Š</span>
            <input type="range" id="musicVolume" min="0" max="100" value="50">
            <span id="musicVolumeValue">50%</span>
        </div>
        <div class="music-label" id="musicLabel">Play lullabies</div>
    </div>

    <div class="controls">
        <div class="options" id="optionsPanel">
            <label class="option">
                <input type="checkbox" id="enableVideo" checked>
                <span>Video</span>
            </label>
            <label class="option">
                <input type="checkbox" id="enableAudio" checked>
                <span>Audio</span>
            </label>
        </div>

        <div class="streaming-status" id="streamingStatus" style="display: none;">
            <span class="status-label">Sending:</span>
            <span class="status-value" id="streamingStatusValue">Video + Audio</span>
        </div>

        <div class="audio-meter">
            <div class="audio-level" id="audioLevel"></div>
        </div>

        <button class="btn btn-start" id="startBtn">Start Streaming</button>
        <button class="btn btn-stop" id="stopBtn" style="display: none;">Stop Streaming</button>

        <div class="info" id="info">
            Click "Start Streaming" to begin broadcasting
        </div>
    </div>

    <script type="module" src="/js/sender-app.js"></script>
</body>
</html>